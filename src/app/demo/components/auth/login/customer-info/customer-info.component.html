<div class="card">
    <div class="grid">
        <div class="col-12 sm:col-6">
          <h3 class="mr-3">Customer Details</h3>
          <!-- <p-breadcrumb class="max-w-full" [model]="items"></p-breadcrumb> -->
        </div>
        <div class="col-12 sm:col-6">
            <div class="flex justify-content-start xl:justify-content-end align-items-center flex-wrap">
                <div class="flex align-items-center mr-4 flex-wrap">
                    <!-- <h5 class="mr-3 mb-2" *ngIf="insuranceId=='100027'">Customer Type :</h5> -->
                    <h5 class="mr-3 mb-2" >Account Type :</h5>
                    <!-- <h5 class="mr-3 mb-2" *ngIf="insuranceId=='100027'">{{ 'HOME.CustomerType' | translate }} :</h5>
                    <h5 class="mr-3 mb-2" *ngIf="insuranceId!='100027'">{{ 'HOME.AccountType' | translate }}:</h5> -->
                    <p-selectButton [options]="policyHolderList" (click)="setPolicyType()" [(ngModel)]="productItem.IdType" [optionLabel]="getDisplayName()" optionValue="Code"></p-selectButton>
                </div>
                <!-- <p-button class="mt-4 lg:mt-0" label="Change Customer" size="small" (click)="navigateToCustomer()"></p-button> -->
            </div>
        </div>
    </div>
   <div class="grid"> 
        <ng-container *ngIf="insuranceId!='100027'">
            <div class="col-12 lg:col-3 md:col-3">
                <!-- <label for="username">{{ 'HOME.CustomerTitle' | translate }}*</label> -->
                <label for="username">Title *</label>
                <p-dropdown inputId="Title2" 
                    class="w-full" 
                    styleClass="w-full" 
                    (change)="onTitleChange('change')"
                    [options]="titleList" 
                    [(ngModel)]="productItem.Title" 
                    [optionLabel]="getDisplayName()" 
                    optionValue="Code" 
                    placeholder="Select Customer Title">
                </p-dropdown>
            </div>
            <div class="col-12 lg:col-3 md:col-3" >
                <!-- <label for="username">{{ 'HOME.CustomerName' | translate }} *</label> -->
                <label for="username">Customer Name *</label>
                <input pInputText id="CustomerName" class="w-full"  maxlength="150"  [(ngModel)]="productItem.ClientName" 
                (change)="onsavedatas('Customer',null)" placeholder="Enter Customer Name"/>
            </div>
        </ng-container>
        <div class="col-12 lg:col-3 md:col-3">
            <!-- <label for="username">{{ 'HOME.CountryCode' | translate }}*</label> -->
            <label for="username">Country Code *</label>
            <p-dropdown inputId="CountryCode" 
                class="w-full" 
                styleClass="w-full" 
                [options]="mobileCodeList" 
                [(ngModel)]="productItem.MobileCode" 
                [optionLabel]="getDisplayName()" 
                optionValue="Code" 
                placeholder="Select Code">
            </p-dropdown>
        </div>
        <div class="col-12 lg:col-3 md:col-3">
            <!-- <label for="username">{{ 'HOME.MobileNumber' | translate }}*</label> -->
            <label for="username">Mobile No</label>
            <input pInputText id="mobileNo" class="w-full"  maxlength="10" [(ngModel)]="productItem.MobileNo"
                placeholder="Enter Phone Number" (change)="onsavedatas('Mobile',null)">
        </div>
    </div>
    <p-divider />
    <div class="grid">
        <div class="lg:col-12 md:col-12 col-12">
                <div class="flex flex-wrap">
                    <div class="lg:col-8 md:col-8 col-12">
                        <h3>Period Of Insurance</h3>
                    </div>
                </div>
                <div class="flex flex-wrap">
                    <div class="col-12 lg:col-3 md:col-3">
                        <label for="username">Policy Start Date</label>
                        <p-calendar class="w-full" styleClass="w-full" [minDate]="minDate" 
                            [(ngModel)]="policyStartDate" (onSelect)="onStartDateChange('change')"
                            dateFormat="dd/mm/yy" placeholder="Select Start Date">
                        </p-calendar>
                        <div class="input-form-error bottomSpacing" *ngIf="policyStartError || policyPassDate"
                            >
                            <div class="error-text text-danger" *ngIf="policyStartError">
                                <span class="spancommon span_font_size"> Please Enter Policy Start Date</span>
                            </div>
                            <div class="error-text text-danger" *ngIf="policyPassDate">
                                <span class="spancommon span_font_size">Please Select Future Date</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 lg:col-3 md:col-3">
                        <label for="username">Currency*</label>
                        <p-dropdown inputId="make" class="w-full" styleClass="w-full" [options]="currencyList"
                            [(ngModel)]="currencyCode" (onChange)="onCurrencyChange('change')" 
                            optionLabel="CodeDesc" optionValue="Code" placeholder="Select Currency">
                        </p-dropdown>
                        <div class="input-form-error" *ngIf="currencyCodeError">
                            <div class="error-text">
                                Please Select Currency
                            </div>
                        </div>
                    </div>
                    <div class="col-12 lg:col-3 md:col-3">
                        <label for="username">Exchange Rate</label>
                        <input pInputText id="username" maxlength="50" class="w-full"  [(ngModel)]="exchangeRate"
                            (change)="onCommonDetailsChange()" />
                    </div>
                    <div class="col-12 lg:col-3 md:col-3">
                        <label for="username">PromoCode&nbsp;(Optional)</label>
                        <input pInputText id="username" maxlength="50" class="w-full" [(ngModel)]="promocode" 
                            (change)="onCommonDetailsChange()" placeholder="Enter PromoCode" />
                    </div>
                </div>
            </div>
        </div>
        <ng-container *ngIf="productId=='46'">
                    
            <div class="flex flex-wrap justify-content-between pl-3 pr-2 pb-0">
                <div>
                    <h4 class="m-0 p-0">Vehicle Details</h4>
                </div>
                <div *ngIf="vehicleDetailsList.length!=0 && vehicleDetailsList.length!=1">
                    <p-button label="Remove Vehicle" size="small" (click)="onDeleteVehicle()"></p-button>
                </div>
            </div>
        <ng-container>
            <div class="grid mt-1">
                <div class="lg:col-2 md:col-2 col-2"></div>
                <div class="lg:col-8 md:col-8 col-8">
                    <form [formGroup]="form" (ngSubmit)="onSubmit(productItem)">
                        <formly-form [form]="form" [fields]="fields" [model]="productItem"></formly-form>
                    </form>
                </div>
            </div>
        </ng-container>
    </ng-container>
        <div class="flex flex-warp justify-content-center">
            <button pButton pRipple label="<Back"  class="p-button-outlined"> </button>&nbsp;&nbsp;
            <button pButton pRipple label="Proceed"></button>
        </div>
</div>
